## 基础知识

**路由**：把网络层收到的 IP数据包，按照路由表从一个网络传送到哪一个网络的行为和动作

- 路由器主要功能
  - 网络互连
  - 数据处理
  - 网络管理
- 路由器接口
  - 局域网接口
    - RJ-45接口（LAN口）
  - 广域网接口
    - SC接口（光纤接口）
    - 高速同步串口
    - 异步串口
  - 配置接口
    - Console 接口
    - AUX 接口
    - SIC 模块接口


>默认路由：没有匹配成功的IP数据包，都按默认路由转发。

##### 路由器访问方式：

- 带外方式
- 通过 Telnet
- 通过 Web
- 通过 SNMP
- 通过AUX口实现远程配置

## 命令行


| 模式 | 指令                    | 作用             |
| ---- | ----------------------- | ---------------- |
| #    | show vlan 1             | 查看vlan信息     |
| #    | show ip interface       | 显示三层接口信息 |
| #    | show ip route           | 显示路由信息     |
|      | ip address 192.168.1.10 | 配置 ip 地址     |
|      | ip route                | 配置静态路由     |
|      | no ip route             | 散出静态路由     |
|      |                         |                  |

## 实验7：PPP 认证


**1． PPP 由哪些协议组成？**

链路控制协议， 网络层控制协议， 验证协议


**2． PPP 支持哪两种验证方式， 各有什么特点？**

- PAP 验证： 两次握手协议， 明文方式进行验证， 链路建立初期进行验证
- CHAP 验证： CHAP 为三次握手协议， 只在网络上传输用户名， 而并不传输口令， 安全性要比 PAP 高， 但认证报文浪费带宽。


**3． PPP认证如何控制用户选择使用明文密码或密文密码方式？**

用 0 是非密文输入， 用1到7是密文， 缺省输入方式为明文， 与其他厂商设备互联时， 只能采
用不加密方式。


**4．封装PPP链路协议的含义是什么？**

物理接口或者逻辑接口必须封装PPP链路协议。


**5． 为什么V35电缆连接路由器的串口一定要配置时钟？**

因为LCP和JPCP都有超过时间， 一旦到了 这个超过时间， LCP将重新发送请求， 超过这个时
间可以通过配置时钟命令设定以便协调异种设备互联时的不一致协商时间。


**6． 写出PAP和CHAP认证配置的步骤**

PAP： 
```cmd
username Ra password 0 star
Interface serial 1/2
PPP autherication pap
Debug ppp authentication
```

CHAP:
```cmd
Username Ra password 0 star
Interface serial 1/2
Encapsulation ppp
Debug ppp authertication
```


**7． 掌握基本PPP配置命令， 写出每一条命令的功能**

|                                                               |                              |
| ------------------------------------------------------------- | ---------------------------- |
| ip address                                                    | 配置接口地址                 |
| clock rate                                                    | 在DCE端配置时钟              |
| username Rb password 0 star                                   | 配置对方的主机名作用户名密码 |
| ppp pap sent-username Ra password 0 star  PAP认证用户名和密码 |
| encapsulation ppp                                             | 接口下封装PPP                |
| ppp authentication                                            | PPP启用， 认证               |
| debug ppp authentication                                      | PAP验证过程                  |
| no debug authentication                                       |                              |

## 实验8：静态路由


**1．与交换机相比较，路由器的访问方式增加了哪一种？有什么作用？**

通过 SNMP 管理工作站对路由器进行远程管理。


**2．路由器与网络连接的每个接口都（可以）需要配置 IP地址和子网掩码，交换机的端口没有这个概念，为什么？**

交换机工作在数据链路层，不涉及IP。

**3．什么是静态路由？**

由管理员手工配置的路由信息。


**4．使用静态路由有什么特点？**

- 手工配置，不占用路由器资源
- 简单、高效、可靠
- 不对外广播内容，安全性好，保密性高
- 用户可指定对某网络的访问路径

**5．观察路由器的路由表项**

**6．描述IP协议分组转发算法的查表过程**

匹配直连网络；匹配主机；匹配间接网络；匹配缺省地址；报错

## 实验9：902.1Q-VLAN 间通信


**1．如何实现 VLAN 间通信？**

- 利用三层交换机实现 VLAN 间通信
  - 优点：
    - 速度更快
    - 转发速率更高
  - 实现方式：
    - **在三层交换机上，创建各个VLAN的 SVI，并设置IP地址，作为其对应二层VLAN内设备网关**
- 利用路由器实现 VLAN 间通信
  - 单臂路由


**2．三层交换机虚拟接口的作用是什么？**

- 路由端口，可设置 IP 地址
- 作为 VLAN 内主机的网关


**3．什么时候需要用三层交换机实现虚拟局域网的互通？**

当需要不同 VLAN 间互通时，涉及到大型局域网内的数据路由和交换。
三层交换机既可以工作在协议的第三层替代或部分完成传统路由器的功能，同时又具有几乎第二层交换的速度。


**4．锐捷交换机端口之间连接使用何种连接线？**

交叉线


**5．简述你对子接口的理解，有什么作用?**

子接口是在一个物理接口上衍生出来的多个逻辑接口。
作用：使多个逻辑接口与一个物理接口建立关联关系。


**6．如何理解单臂路由？**

在路由器的物理接口上创建多个子接口，不同的子接口用于转发不同 VLAN 标签的数据帧，从而实现不同 VLAN 之间的通信

**7．总结利用三层交换机的 SVI 接口实现 VLAN 间通信的关键配置要点**

SVI 指为交换机中的VLAN创建的虚拟接口

管理距离越低，学到的路由越可信

静态配置路由的优先级高于动态路由学到的路由

三层交换机利用直连路由可以实现不同 VLAN 之间的互联。

## 实验10：RIP路由协议

**1．RIP 协议的特点：**

- RIP 是一种距离矢量路由协议
- RIP 使用跳数作为路由选择的度量
- 当到达目的网络的跳数超过15跳，数据包将被丢掉
- 缺省地，RIP 路由更新广播周期为 30秒



**2．RIPv1和RIPv2协议的主要差别：**

| RIPv1                    | RIPv2                  |
| ------------------------ | ---------------------- |
| 有类路由协议，不支持VLSM | 无类路由协议，支持VLSM |
| 以广播的形式发送更新报文 | 以组播的形式更新报文   |
| 不支持认证               | 支持明文和MD5的认证    |

**3．关联网络有什么含义：**

- RIP 只对外通告关联网络的路由信息
- RIP 只向关联网路所属接口通告路由信息

**4．解释下面路由表项的含义：**

```
R 172.16.1.0/24 [120/1] via 172.16.2.1, 00:00:04, serial 1/2
```
- `R` 路由RIP 协议
- `172.16.1.0` 目的网段 
- `24` 掩码
- `120` 管理距离
- `1` 跳数
- `172.16.2.1` 下一跳IP
- `00:00:04` 所用时间
- `serial 1/2` 通过的接口

**5．默认路由项有什么特征？写出添加默认路由表项的命令使默认路由指向192.168.5.1**

目的地IP和子网掩码是 0.0.0.0 和 0.0.0.0

```
ip route 0.0.0.0 0.0.0.0 192.168.5.1
```

!> 细化的实验部分：

?> RIP（路由信息协议）是一种使用较为普遍的内部网关协议；实验目的：掌握在路由器上配置RIP V2

**网络拓扑：**

![](https://img-1301102143.cos.ap-beijing.myqcloud.com/20220331162106.jpg)

**实验步骤：**

1. 按照拓扑图连接测试机，并配置 IP地址 和 网关地址。这时两台机器 Ping 不通

2. 三层交换机基本配置

```cmd
hostname s5750

vlan 10

vlan 50

int f 0/1
switchport access vlan 10

int f 0/5
switchport access vlan 50

interface vlan 10
ip address 172.16.1.2 255.255.255.0
no shut

interface vlan 50
ip address 172.16.5.1 255.255.255.0
no shut

show vlan
show ip interface
show ip route !显示路由表信息
```

3. 路由器基本配置

在路由器R1上配置接口的IP地址和串口上的时钟频率。（注意：DCE端应接R1，图中两路由器之间使用的是 V35 DCE/DTE 线缆）

```cmd
hostname router1

interface f 1/0
ip address 172.16.1.1 255.255.255.0
no shut

interface s 1/2
ip address 172.16.2.1 255.255.255.0
clock rate 64000
no shut

show ip int brief
```

在路由器R2上配置接口的IP地址，步骤和 R1 基本相同

4. 配置RIPV2

在 S5750 上配置RIPV2

```cmd
router rip !创建 RIP 路由进程

network 172.16.1.0 !申明直连网络
network 172.16.5.0
version 2
```

在 R1 上配置RIPV2

```cmd
router rip
network 172.16.1.0
network 172.16.2.0
version 2
no auto-summary
```


在 R2 上配置RIPV2

```cmd
router rip
network 172.16.2.0
network 172.16.3.0
version 2
no auto-summary
```

5. 验证三台路由设备的路由表，观察是否自动学习了其它网段的路由信息。

```cmd
show ip route
```



## 实验11：OSPF 路由协议

?>开放式最短路径优先（Open Shortest Path First，OSPF）是一种广泛使用的动态路由协议。<br>它属于链路状态路由协议，具有路由变化收敛速度快、无路由环路、支持变长子网掩码（VLSM）和汇总、层次区域划分等优点


**1．总结 OSPF 路由协议的特点？**

- 可适应大规模网络
- 组播触发式更新
- 路由变化收敛速度快
- 无路由自环，执行生成树算法
- 支持变长子网掩码
- 支持等值路由、分担负载



**2. 计算下子网对应的反掩码：**

255.255.255.224 `0.0.0.31`

255.255.240.0 `0.0.15.255`


**3. 解释 DR 和 BDR 的概念和作用**

DR 在多路访问网络中代表所有的路由器。作用：描述多址网络和剩下的其它路由器。

DBR：DR 的备份路由，当 DR 故障时，BDR 变成 DR 开始工作。

**5．对 OSPF 使用的路由生成算法 SPF 做简单描述。**

SPF算法将每一个路由器作为根（ROOT）来计算其到每一个目的地路由器的距离，每一个路由器根据一个统一的数据库会计算出路由域的拓扑结构图，该结构图类似于一棵树，在SPF算法中，被称为最短路径树

`Open Shortest Path First`，开放式最短路径优先

`Shortest Path First`，SPF 算法也称为 Dijkstra 算法

## 实验12：DHCP 服务配置

?>DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）通常被应用在大型的局域网络环境中，<BR>主要作用是集中的管理、分配IP地址，使网络环境中的主机动态的获得IP地址、Gateway地址、DNS服务器地址等信息，并能够提升地址的使用率