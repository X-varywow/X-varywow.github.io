## 基础知识

>交换机，是一台专门用于通信的计算机，在数据链路层进行帧存储交换，由硬件系统和交换机操作系统组成。

>冲突域：在同一个冲突域中，每个节点都能收到所有被发送的帧。 

>广播域：网络中能接收任一设备发出的广播帧的所有设备的集合。

- 交换机的特点
  - 所有端口都在一个广播域中
  - 每个端口带宽独立
  - 每个端口都是独立的冲突域
  - 交换机能够识别 L2 的控制信息
  - 独占带宽
- 分类
  - 二层交换机
    - 和集线器相比，多了MAC地址表功能，属于数据链路层，有一个广播域和多个冲突域。
  - VLAN 型交换机
    - 可以网管的交换机，多了VLAN功能，属于数据链路层，由多个广播域和多个冲突域。
  - 三层交换机
    - VLAN 型交换机 + 路由器，属于网络层。
- **主要功能**
  - 学习（主机之间互相发送数据，交换机会学习数据帧的源MAC地址）
  - 转发/过滤
  - 消除环路
- **管理类型**
  - 带内管理
    - 通过 Telnet
    - 通过 Web
    - 通过 SNMP
  - 带外管理，通过 Console 端口


>交换机端口之间使用 交叉线 连接

## 命令行

- 用户模式 `>`
- 特权模式 `#`
- 全局配置模式 `config`
- 接口配置模式 `config-if`
- VLAN配置模式 `config-vlan`


| 模式        | 指令                       | 作用                           |
| ----------- | -------------------------- | ------------------------------ |
|             | ?                          | 列出每条命令模式支持的所有命令 |
| >           | enable                     | 进入特权模式                   |
| #           | configure terminal         | 进入全局配置模式               |
| #           | vlan 10                    | 进入 vlan10  的配置模式        |
| #           | interface fastEthernet 0/1 | 进入 f0/1 接口 的配置模式      |
|             |                            |                                |
| #           | show running-config        | 查看配置文件信息               |
| #           | write memory               | 保存当前配置到内存             |
| #           | show vlan 1                | 查看vlan信息                   |
| #           | show ip interface          | 显示三层接口信息               |
| #           | show ip route              |                                |
| #           | show interface fa0/1       | 查看接口信息                   |
| config-vlan | name test1                 | 重命名vlan                     |
| config      | hostname s2628             | 设置网络设备名称               |
| config      | no vlan 10                 | 删除 vlan 10                   |
|             | ip address 192.168.1.10    |                                |

## 实验3：交换机的级联和堆叠

1．交换机堆叠有什么优点？

- 扩展端口密度
- 方便用户的管理操作
- 扩展上链带宽

2．VSU

VSU 是一种网络系统虚拟化的技术，物理上是多台设备，逻辑上绝对是一台设备，用户可以使用堆叠模块和堆叠连接线将多台交换机连接在一起构成 VSU。


## 实验4：虚拟局域网VLAN

虚拟局域网技术：利用二层交换设备，把一个物理网络划分出多个逻辑网络。一个 VLAN 组成一个逻辑子网，**形成一个逻辑广播域**，并且允许处于不同地理位置的网络用户加入到一个逻辑子网中。

------------------

**1．支持 VLAN 的技术标准？**

`IEEE 802.1Q`

**2．实验中使用的划分 VLAN 的方法是怎样的？本次实验的交换机工作在哪个层次？**

根据端口划分 vlan；数据链路层


**3．交换机端口的成员类型：**

- access 端口，只能属于一个 VLAN，发送的帧不带 VLAN 标签，一般用于连接计算机端口。
- trunk 端口，允许多个 VLAN 通过，一般用于交换机之间连接。


**4．VLAN1 有什么特点？**

VLAN1 是不可删除的默认 VLAN，由交换机自动创建

----------------------

- trunk 端口作用：
  - trunk 端口可以传送所有 VLAN 数据，同时隔离 VLAN；
- 什么时候需要配置？
  - 需要在划分 VLAN 的同时，保证分布在不同交换机上的计算机网络联通时配置
- 两个交换机的 trunk 端口之间连线应该使用什么网线？
  - 交叉线

-----------------------

**6. 将端口划分到一个不存在的 VLAN 中，系统如何处理？**

系统自动创建该 VLAN，并将端口划分到其中。

**7. 写出下面命令的功能**

|                                   |                         |
| --------------------------------- | ----------------------- |
| interface fa 0/1                  | 进入 0/1 接口的配置模式 |
| switchport access vlan 10         | 将接口加入 vlan 10      |
| switchport mode trunk             | 将端口设置为 trunk 模式 |
| show interfaces fa 0/5 switchport |                         |
| show vlan                         |                         |
| show vlan id 10                   |                         |
| no vlan 10                        | 删除 vlan               |

**8. 简单总结**

划分 VLAN 可以实现网络间隔离，保证信息安全；

划分 VLAN 的同时，可以使用 TRUNK 技术，将不同交换机上的同 VLAN 计算机互联。


```cmd
创建

分配端口
```

## 实验5：生成树配置

----------------------

以太网中存在冗余链路会产生什么问题？

可能导致广播风暴、多帧复制及 MAC 地址表不稳定等问题。

----------------------

生成树协议 STP 和 RSTP 的标准名称是什么？

`IEEE 802.1d`，`IEEE 802.1w`

---------------------

桥协议数据单元有什么作用？

用于交换机或网桥之间传输 STP 相关信息。

----------------------

STP 协议重要的概念：

- 根交换机：Bridge ID 最小的交换机
- 根端口：非跟交换机与最短路径交换机连接的端口
- 指定端口：由LAN 确定的端口

----------------------

STP 工作时如何选择根交换机？

Bridge ID 最小的作为根交换机，交换机优先级相同时，MAC地址小的优先。

------------------

STP 有什么问题？RSTP 的改进？

整个网络拓扑稳定为一个树形结构大概需要 50 秒；

通过端口角色的增补（替换端口、备份端口），简化了生成树协议的理解及部署；点对点链路加快


-----------------

路径开销如何计算？

速率越大，开销越小；速率相同时，成员多的开销小。




## 实验6：802.3ad 端口聚合

**1． 什么是端口聚合？**

端口聚合：两台交换机在物理上将多个端口连接起来，将多条链路聚合成一条逻辑链路。

好处：可以增大链路带宽，解决交换网络中因带宽引起的网络瓶颈问题，并实现链路冗余备份。

**5． 交换机上如何表示单一或多个连续端口？**

```cmd
interface fa0/3

interface range fa 0/1-2
```