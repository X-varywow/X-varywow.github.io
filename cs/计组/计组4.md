考纲内容：
- 指令格式的基本概念
- 指令格式
- 寻址方式
- 数据的对齐和大/小端存放方式
- CISC和RISC的基本概念
- 高级语言程序与机器级代码之间的对应
- 编译器、汇编器和链接器的基本概念；选择结构语句的机器级表示
- 循环结构语句的机器级表示；过程（函数）调用对应的机器级表示

--------------------

## 4.1 概述

$Instruction Set$ 指令系统

**指令**：用户使用计算机与计算机本身运行的最小功能单元

**指令系统**：计算机支持到的全部指令的集合

- 分类：
  - CISC
  - RISC
- 衡量指令系统的标准
  - 完备性
  - 高效性
  - 规整性
  - 兼容性


**微指令**：由若干个存储单元组成，每个字的内容，由执行一条指令的一个运行步骤用到的全部信号，以及主要用于指明下一个执行步骤的地址信息共同组成。

**微程序**：将机器中的指令分解为基本的微命令序列，用二进制表示这些命令，并编写成微指令，多条微指令再形成微程序。

--------------

指令分类

- 按操作数地址码分类
  - 零地址指令
  - 一地址指令
  - 二地址指令
  - 三地址指令
  - 四地址指令
- 按操作码长度分类
  - 定长操作码
  - 可变长操作码


- 无操作数指令
  - NOP 空操作
  - RET 子程序返回
- 单操作数指令
- 双操作数指令
  - ADD DR, SR
- I/O 指令
- 转移指令
- 子程序调用指令


## 4.2 指令格式

操作码 + 地址码

## 4.3 寻址方式

寻址方式：寻找指令或操作数有效地址的方式；

分为 `指令寻址` 和 `数据寻址`

### 4.3.1 指令寻址

- `顺序寻址`
  - PC + 1 -> PC（1为1个指令字长）
- `跳跃寻址`
  - 由转移指令指出


### 4.3.2 数据寻址

|                |                                                   |
| -------------- | ------------------------------------------------- |
| **寄存器寻址** | 操作数在 **寄存器** 中                            |
| 寄存器间接寻址 | 操作数地址在寄存器中                              |
| **立即数寻址** | 操作数 **在指令中**                               |
| 直接寻址       | 操作数地址在指令中                                |
| 基址寻址       | 操作数地址 由指定基址寄存器和指令的地址码相加得到 |
| 变址寻址       | 操作数地址 由指定变址寄存器和指令的地址码相加得到 |
| 相对寻址       | 操作数地址 由 PC 和指令的地址码相加得到           |
| 间接寻址       | 操作数地址为地址的地址                            |
| 堆栈寻址       | 涉及堆栈寄存器                                    |

!>什么是形式地址？简述对变址寻址、相对寻址、基地址寻址应在指令中给出些什么信息？
如何得到相应的实际（有效）地址？各自有什么样的主要用法？

答：在指令的地址码字段给出的与操作数（或指令）地址有关的信息，构成形式地址。依据
这些信息并结合一定的规则，可以计算出访问内存的实际（有效）地址。

（1）寄存器寻址，形式地址为寄存器名（或编号），寄存器中的内容为操作数；

（2）寄存器间接寻址，形式地址为寄存器名（或编号），寄存器中的内容为操作数的地址，
再读一次内存得到操作数；

（3）变址寻址，形式地址为变址寄存器名（或编号）和变址偏移值，把变址寄存器中的内
容与变址偏移值相加得到操作数的地址，再读一次内存得到操作数；用于访问内存中的一组
数据更方便。

（4）相对寻址，形式地址为相对寻址的偏移值，该偏移值和程序计数器 PC 的内容相加得
到一个内存单元的地址，通常用在条件或无条件转移指令中给出指令转移地址。

（5）基地址寻址，通常要使用一个特定的寄存器，称为基地址寄存器，把程序中的指令或
数据地址和该基地址寄存器的内容相加得到一个内存单元的地址，通常用在操作系统为用户
程序分配内存地址空间后，变换程序静态地址为运行过程中的实际内存地址。

!>  单地址指令中为了完成两个数的算术运算，除地址指明一个操作数外，另一个操作数常
用 **隐含寻址** 方式

## 4.4 指令执行流程

![](https://img-1301102143.cos.ap-beijing.myqcloud.com/202201102259216.jpg)