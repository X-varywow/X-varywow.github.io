考纲内容：
- 存储器的分类
- 层次化存储器的基本结构
- 半导体随机存取存储器
  - SRAM、DRAM、Flash 存储器
- 主存储器
  - DRAM 芯片及内存条、多模块存储器、主存和CPU之间的连接
- 外部存储器
  - 磁盘存储器、固态硬盘 SSD
- 高速缓冲存储器
  - Cache 的基本原理；Cache 和主存之间的映射方式
  - Cache 中主存块的替换算法； Cache 写策略
- 虚拟存储器
  - 虚拟存储器的基本概念
  - 页式虚拟存储器：基本原理、页表、地址转换、TLB
  - 段式虚拟存储器的基本原理；段页式虚拟存储器的基本原理

## 3.1 存储系统

- 存储器
  - 存储体
  - MAR，存储地址寄存器，MAR位数反映存储单元的个数
  - MDR，存储数据寄存器，MDR位数 = 存储字长

- 随机存储器 RAM
  - 性质：
    - 任何一个存储单元都可以随机存取，存取时间与存储单元的物理位置无关
    - 读写方便，使用灵活，**主要用于主存或高速缓存**
  - 分类：
    - 静态 RAM `SRAM`
      - 触发器原理寄存信息
      - 速度快，非破坏性读出
    - 动态 RAM `DRAM`
      - 电容充电原理寄存信息
      - 速度慢，破坏性读出
- 只读存储器 ROM

!>**存取周期**：指的是计算机进行一次访存所需要的时间，包括读写时间以及物理的恢复等待时间。（存储器进行连续读或写操作允许的最短间隔时间）


!> 比较和说明主存、辅存、高速缓冲存储器、微控存和虚拟存储器。⭐

答：多级结构的存储器由 **高速缓冲存储器**、**主存储器** 和 **虚拟存储器** 构成。

高速缓冲存储器使用静态存储器芯片实现，为了提高访存速度，主存储器通常使用动态存储器芯片实现，两者是半导体电路器件，以数字逻辑电路方式进行读写；

**辅存** 是主存的后备存储器，速度比主存慢，容量大；

**虚拟存储器** 为了扩大主存容量和地址分配问题，它使用快速磁盘设备上的一片存储区，是在磁性介质层中通过电磁转换过程完成信息读写的。

**微控存** 是用来存放微指令的存储器，速度比主存快。 

!> 简述信息的一致性和包含性原则

（1）一致性原则，即同一个信息会同时存放在几个级别的存储器中，并且保持相同的值。

（2）包含性原则，即处在内层存储器中的信息一定被包含在各外层的存储器中。

!> 在计算机中，为什么要采用多级结构的存储器系统？它们的应用是建立在程序的什么特性之上的？

三级结构的存储器系统的运行原理，是建立在程序运行的局部性原理之上的。即在一小段时间内，运行的程序只使用少量的指令和少量的数据，而这少量的指令和少量的数据往往又集中在存储器的一小片存储区域中，指令顺序执行比转移执行的比例要大，故可以按
对所使用的指令和数据的急迫和频繁程度，将其存入容量、速度、价格不同的存储器中，从而取得更高的性能价格比。主要体现在 **时间、空间、指令执行顺序** 三个方面。


## 3.2 字位扩展

`CS` 为片选信号（仅该信号，有时需要考虑译码）

`WE` 为读写控制信号

地址线数量与容量有关，数据线数量与数据位有关；

![](https://img-1301102143.cos.ap-beijing.myqcloud.com/202201082106615.jpg ':size=50%')
![](https://img-1301102143.cos.ap-beijing.myqcloud.com/202201082106606.jpg ':size=45%')

!> 画连接图？

![](https://img-1301102143.cos.ap-beijing.myqcloud.com/202201110008651.jpg)

>图中地址线多了一位（应该）

## 3.3 外部存储器

平均存取时间 = 寻道时间（磁头移动到目的磁道） + 旋转延迟时间（磁头定位到读写扇区） + 传输时间

----------------

**RAID（独立冗余磁盘阵列）**

----------------

**固态硬盘**

## 3.4 Cache

- 时间局部性
  - 最近被访问的信息很可能还要被访问。
- 空间局部性
  - 最近被访问的信息临近的信息也可能被访问。


- 块（Line）：数据交换的最小单位
- 命中（Hit）：在较高层次中发现要访问的内容
  - 命中率（Hit Rate）：命中次数/访问次数
  - 命中时间：访问在较高层次中数据的时间
- 失效（Miss）：需要在较低层次中访问块
  - 失效率（Miss Rate）：1-命中率
  - 失效损失（Miss Penalty）：替换较高层次数据块的时间+将该块交付给处理器的时间
- 命中时间<<失效损失


### 3.4.2 Cache 与主存映像方式

- `全相连映像`
  - 主存的每一块可以装入 Cache 中的任何位置
- `直接映像`
  - 主存中的每一块只能装入 Cache 唯一位置
- `多路组相联映像`
  - 组内全相联（全部可映射），组间直接映射（固定位置，取模映射）

### 3.4.3 Cache 写策略

目的：使Cache内容和主存内容保持一致

- 写命中
  - `全写法`（同时写入 Cache 和主存）
  - `回写法`（Cache块被换出时写入主存）
- 写不命中
  - `写分配法`（加载没命中的主存块到 Cache 中，然后更新 Cache）
  - `非写分配法`（只写入主存，不分配个 Cache 写）

## 3.5 虚拟存储器

>通常指**高速磁盘上的一片存储空间**，其功能通过硬件、软件的方法，可以将其作为主存储器的扩展的存储空间来使用。

- 管理技术
  - 段式存储管理
  - 页式存储管理

特点：
- 允许用户用比主存空间大得多的空间访问主存。
- 每次访存都要进行虚实地址的转换。

!> 当程序正在执行时，由（操作系统）完成地址映射。

### 辅助存储器

大多采用 磁表面存储器