考纲内容：
- IO 管理基础
  - 设备：设备的基本概念，设备的分类，IO接口
  - IO 控制方式：轮询方式，中断方式，DMA方式
  - IO 软件层次结构：中断处理程序，驱动程序，设备独立性软件，用户层IO软件
  - IO 应用程序接口：字符设备接口，块设备接口，网络设备接口，阻塞/非阻塞IO
- 设备独立软件
  - 缓冲区管理；设备分配与回收；假脱机技术（SPOOLing）；设备驱动程序接口
- 外存管理
  - 磁盘：磁盘结构，格式化，分区，磁盘调度算法
  - 固态磁盘：读写性能特效，磨损均衡


## 5.1 I/O设备

- 【将数据输入输出计算机的外部设备】
- 按使用特性分类：
  - 人机交互类设备（数据传输速度慢）
  - 存储设备（数据传输速度快）
  - 网络通信设备
- 按信息交换的单位分类：
  - `块设备`（传输快，可寻址，属于有结构的设备，如 **磁盘**）
  - `字符设备`（传输慢，不可寻址，常采用中断驱动方式，属于无结构的设备，如 交互式终端机，打印机）


## 5.2 I/O控制器

I/O 接口，也称设备控制器；位于 CPU 与设备之间

- 主要功能：
  - 接受和识别CPU发出的命令（控制寄存器）
  - 向CPU报告设备的状态（状态寄存器）
  - 数据交换（数据寄存器）
  - 地址识别（由I/O逻辑实现）
- 组成：
  - CPU与控制器间的接口
  - 控制器与设备间的接口
    - 有着一个或多个设备接口，因为控制器可以连接一个或多个设备
  - I/O逻辑
- 寄存器编址方式：
  - 内存映射I/O
    - 控制器中的寄存器与内存同一编制
  - 寄存器独立编址
    - 需要设置专门的指令来操作控制器



## 5.3 I/O控制方式

- 程序直接控制方式
  - 【在等待I/O完成的过程中需要CPU不断轮询检查】
  - 优点：实现简单
  - 缺点：CPU利用率低
- 中断驱动方式
  - 优点：CPU和I/O设备可并行工作
- DMA方式（direct memory access）
  - 【在 IO设备 和内存之间，开辟直接的数据交换通路】
  - 数据的传送单位是块
- 通道控制方式
  - 【通道是专门负责输入/输出的处理机，由硬件实现】
  - 优点：CPU、通道、I/O设备可并行工作，资源利用率很高
  - 缺点：实现复杂，需要专门的通道硬件支持



## 5.4 I/O软件的层次

- `用户层软件`【实现了与用户交互的接口】:
  - 功能：【假脱机技术】
- I/O系统【属于操作系统的内核部分】：
  - `设备独立性软件`
    - 组成
      - 执行所有设备共有操作的软件
      - 磁盘高速缓存
      - 缓冲区
        - 单缓冲，max(C, T) + M
        - 双缓冲, max(C + M, T)
    - 功能：【I/O调度、设备保护、设备分配与回收、缓冲区管理】
  - `设备驱动程序`
  - `中断处理程序`
- 硬件

----------------------

设备分配与回收？？？

分配设备 -> 分配控制器 -> 分配通道

设备控制表DCT，控制器控制表COCT，通道控制表CHCT，系统设备表SDT

设备的独立性：用户在编程时使用的设备与实际设备无关

----------------------

`假脱机技术`，又称`SPOOLing技术`，用软件的方式模拟脱机技术。
- 在内存中建立缓冲区
- 在磁盘中建立输入/输出井。

## 5.5 磁盘和固态硬盘

`磁盘` 由表面涂有磁性物质的圆形盘片组成，每个盘片被划分为一个个磁道，每个磁道又划分为一个个扇区。

磁盘的物理地址：（柱面号，盘面号，扇区号）

磁盘读取数据时，影响最大的是：寻找时间

### 5.5.2 磁盘的调度算法

| 算法                     | 描述                                                               | 特点     |
| ------------------------ | ------------------------------------------------------------------ | -------- |
| 先来先服务               |                                                                    | 公平性   |
| 最短寻找时间优先         |                                                                    | 会“饿死” |
| 扫描算法（电梯调度算法） | 磁头移动方向上，最近的请求，作为下一次服务的对象                   |          |
| 循环扫描                 | 在扫描算法的基础上，规定磁头服务时单向移动，回返时快速移动至起始端 |          |

### 5.5.3 固态硬盘

固态硬盘（SSD）是一种基于 闪存技术的存储器。（依靠电子信号传输，速度比机械磁头快）

- 以 页 为单位读/写
- 以 块 为单位擦除


- 磨损均衡技术
  - 动态磨损均衡（写入时，自动选择较新的闪存块）
  - 静态磨损均衡（不管有无写入，自动监测并进行数据的分配）（更优秀）

-------------------

其它考点：

（1）磁盘、光盘、U盘既可以随机访问、又可以顺序访问；磁带不可以随机访问

（2）提高磁盘IO速度：提前读、延迟写、虚拟盘

