
## _基本原理_

ELO，一种用于评估玩家实力和进行匹配的算法。 广泛应用于游戏，开始的围棋象棋，到后来的 LOL, wzry, dota


原理：将一定实力的玩家发挥看成高斯分布，可以描述选手的平均水平，稳定性

$$f(x) = \frac{1}{\sqrt {2\pi}} e^{\frac{-(x-U)^2}{2\delta^2}}$$


</br></br>

## _迭代过程_

预期胜率：

$$P(D) = \frac{1}{2} + \int_0^D\frac{1}{\sqrt {2\pi}\delta} e^{\frac{-x^2}{2\delta^2}dx}$$


实际使用中，利用最小二乘，近似计算 （其中 D 为二者的分差）：

$$P(D) = \frac{1}{1 + 10^\frac{-D}{400}}$$

</br>

$E_a $：预期 A 选手的胜率： $\frac{1}{1 + 10^\frac{R_b - R_a}{400}}$ （其中 $R_b$ 为 B 选手当前分数）

$E_a + E_b = 1$

$S_a$ 实际胜负值，1，0, 0.5

------------

分数迭代：

比赛过后分数值：

$$R_a' = R_a + K(S_a - E_a)$$
$$R_b' = R_b + K(S_b - E_b)$$

K 每场比赛能得到的最大分数，魔兽32， LOL 一开始 100 左右，最终 25

--------

例如，棋手A等级分为1613，与等级分为1573的棋手B战平。


若K取32，则A的胜率期望值为 $\frac{1}{1+10^{(1573−1613)/400}} = 0.5573$


A的新等级分为 $1613 + 32 · (0.5 − 0.5573) = 1611.166$



</br></br>

## _额外机制_



为了缩短收敛期：
- 改进点1（定级赛制度, 这个也可以用新手保护来掩盖分数迭代）
  - 将得分情况额外乘以定位赛系统 K
- 改进点2（连胜连败）
  - 扩大 K 值
- 改进点3（段位继承）


其它机制：
- 分数衰减（玩家长时间不练习，分数衰减）
- 打破零和（希望整体分数正向增长）（赠送积分保护，对低分段K 值分离）
- 隐藏分（隐藏分一般用来指示玩家的真实水平，原本是为了避免精确提示打击玩家的信心）
- 匹配时会根据时间扩大分数匹配范围
- 对行为心理的把握，如何利用输赢提高用户的积极性。

多对多扩展：

$P(D) = \frac{1}{1 + 10^\frac{-D}{400}}$ 将 D 改为 自己分数*（1 - 敌方总和/己方总和）


elo偏向于先验，重点落在赛前玩家的实际数据（暂定为a），计算双方胜率


---------------

参考资料：
- [评分和排名算法](https://leovan.me/cn/2022/05/rating-and-ranking-algorithms/)，介绍了常见的投票算法和评分系统
- [阮一峰，基于用户投票的排名算法（一）：Delicious和Hacker News](https://www.ruanyifeng.com/blog/2012/02/ranking_algorithm_hacker_news.html)
- [竞技类游戏的匹配原理是什么？微软的TrueSkill是一个很好的案例！](https://www.bilibili.com/read/cv2195828/)
- [游戏匹配机制介绍 (elo, trueskill, matchmaking, ranking...)](https://www.douban.com/note/773629799)